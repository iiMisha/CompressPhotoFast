# Контекст

## Последние изменения
*   **Переход на экономичный режим (22.01.2026)**: Проект настроен на использование экономичного режима Gradle по умолчанию для снижения нагрузки на CPU. Документация: [`docs/GRADLE_ECO_MODE.md`](docs/GRADLE_ECO_MODE.md).
*   **Расширенная система тестирования (январь 2026)**: Новые скрипты (quick_test.sh, run_e2e_tests.sh, run_performance_tests.sh, start_emulator.sh), базовые классы для тестов (BaseUnitTest, BaseInstrumentedTest, CoroutinesTestRule).
*   **Скрипты установки CLI**: Автоматические установщики для Linux/macOS и Windows с детекцией Python.
*   **Проблема двойных расширений**: Выявлена проблема с созданием файлов с двойными расширениями (например, `image.HEIC.jpg`).
*   **Тестирование HEIC форматов**: Созданы специальные тесты для проверки обработки HEIC/HEIF форматов (20 тестов).

## Текущее состояние проекта

### Android-версия
*   Версия: 2.2.8 (31.08.2025), versionCode 2
*   Kotlin: 2.2.10, Android Gradle Plugin: 8.13.2
*   DataStore для хранения настроек
*   Автоматическое сжатие в фоновом режиме
*   Игнорирование фото из мессенджеров и скриншотов
*   JaCoCo coverage: ~8-10% (целевой 50-70%)
*   24 утилиты в пакете `util`

### CLI-версия
*   Версия: 1.0.0
*   Python: 3.10+
*   Многопроцессорная обработка (ProcessPoolExecutor)
*   Process-safe статистика (multiprocessing.Manager().Lock())
*   Поддержка HEIC/HEIF (pillow-heif)
*   Dry-run режим
*   Автоматические установщики для Linux/macOS и Windows

## Дальнейшие шаги
*   Увеличить coverage тестов до 50-70%
*   Добавить instrumentation тесты для оставшихся компонентов
*   Исправить проблему двойных расширений файлов
*   Документировать повторяющиеся задачи в tasks.md
*   Реализовать E2E тесты для всех категорий
*   Добавить performance тесты
*   Интегрировать автоматический запуск эмулятора в CI/CD пайплайн
