# Agent Rules:

## Использование субагентов

Для выполнения сложных задач необходимо активно использовать субагентов (Task tool).

### Когда и каких субагентов использовать

#### 1. Исследование кодовой базы
- **`Explore`** - ИСПОЛЬЗУЙТЕ ПЕРВЫМ для исследования:
  - Поиск файлов по паттернам (`src/**/*.kt`, `app/src/**/*Test.kt`)
  - Поиск кода по ключевым словам
  - Ответы на вопросы о кодовой базе ("как работает X?", "где находится Y?")
  - Уровни детализации: `"quick"`, `"medium"`, `"very thorough"`

#### 2. Языковые субагенты (voltagent-lang:*)
Используйте для работы с конкретным языком:

- **`kotlin-specialist`** - Kotlin (корутины, KMP, Android) - ОСНОВНОЙ для проекта
- **`java-architect`** - Java (для legacy кода или Android библиотек)
- **`javascript-pro`** / **`typescript-pro`** - JS/TS (для build scripts, frontend частей)
- **`python-pro`** - Python 3.11+ (для скриптов, автоматизации, тестов)
- **`cpp-pro`** - C++ (для JNI/native кода)
- **`rust-engineer`** - Rust (для native модулей)

#### 2.1. Субагенты для тестирования
Используйте для написания и улучшения тестов:

- **`kotlin-specialist`** - для unit и instrumentation тестов (JUnit, MockK, Espresso)
- **`general-purpose`** - для настройки тестовой инфраструктуры, CI/CD для тестов

#### 3. Инфраструктурные субагенты (voltagent-infra:*)
Используйте для DevOps/CI/CD/инфраструктуры:

- **`devops-engineer`** - CI/CD, automation, bridging dev/ops
- **`deployment-engineer`** - Release automation, deployments
- **`platform-engineer`** - Internal developer platforms
- **`security-engineer`** - DevSecOps, vulnerability management

#### 4. Универсальные субагенты

- **`Plan`** - Планирование разработки:
  - Анализ требований перед реализацией
  - Разработка плана реализации
  - Уровни: `"quick"`, `"medium"`, `"very thorough"`

- **`general-purpose`** - Сложные многошаговые задачи:
  - Исследование сложных вопросов
  - Задачи требующие нескольких шагов
  - Доступ ко всем инструментам

- **`claude-code-guide`** - Вопросы о Claude Code:
  - Как работает Claude Code
  - Использование hooks, slash commands, MCP servers
  - Claude Agent SDK архитектура
  - **ВАЖНО:** Проверьте, нет ли уже запущенного агента перед созданием нового

#### 5. Когда НЕ использовать субагентов

❌ **Для чтения конкретного файла** → используйте **Read**
❌ **Для поиска файла по имени** → используйте **Glob**
❌ **Для поиска в 2-3 файлах** → используйте **Read**
❌ **Для простых операций** → выполняйте самостоятельно

#### 6. Принципы использования

✅ **Запускайте агентов параллельно** - одно сообщение с несколькими Task вызовами
✅ **Выбирайте специализированного агента** под технологию
✅ **Для CompressPhotoFast** (Kotlin/Android) → `kotlin-specialist`
✅ **Сначала Explore** для исследования кода, затем специализированный агент

## Обязательные файлы для чтения

При работе с проектом CompressPhotoFast необходимо обращаться к следующим файлам:

### 1. Правила разработки
**Файл:** [`.kilocode/rules/rules.md`](.kilocode/rules/rules.md)

Содержит основные правила разработки:
- Настройки (язык общения, ОС)
- Требования к сборке (обязательная сборка после каждого изменения кода)
- Планирование разработки с указанием необходимости сборки

### 2. Memory Bank
**Папка:** [`.kilocode/rules/memory-bank/`](.kilocode/rules/memory-bank/)

Содержит документацию проекта:
- [`brief.md`](.kilocode/rules/memory-bank/brief.md) - краткое описание проекта
- [`product.md`](.kilocode/rules/memory-bank/product.md) - описание продукта и функций
- [`context.md`](.kilocode/rules/memory-bank/context.md) - текущий контекст и последние изменения
- [`architecture.md`](.kilocode/rules/memory-bank/architecture.md) - архитектура приложения
- [`tech.md`](.kilocode/rules/memory-bank/tech.md) - технологический стек
- [`memory-bank-instructions.md`](.kilocode/rules/memory-bank/memory-bank-instructions.md) - инструкции по работе с Memory Bank

**ВАЖНО:** В начале КАЖДОЙ задачи необходимо читать ВСЕ файлы из Memory Bank.

## Использование Context7 MCP

Context7 MCP сервер установлен глобально и предоставляет актуальную документацию по библиотекам и API.

**Правило автоматического использования:**
Всегда используй Context7 MCP когда нужна документация по библиотекам/API, генерация кода, настройка или конфигурация без необходимости явно указывать "use context7".

**Когда использовать Context7:**
- Нужно получить актуальную документацию по библиотеке или фреймворку
- Необходимо найти примеры кода для конкретной библиотеки
- Требуется понять, как правильно использовать API или функцию
- Нужна информация о настройке или конфигурации инструментов
- Работа с библиотеками, которые могут иметь обновлённую документацию

**Доступные инструменты Context7:**
- `resolve-library-id` - поиск ID библиотеки по названию
- `query-docs` - получение документации для конкретной библиотеки