# План задач для улучшения функционала сжатия изображений

## 1. Новая функциональность

### 1.1. Сжатие с заменой исходного файла
- Реализовать возможность сжатия изображения с заменой оригинального файла:
  - Пользователь получает возможность выбрать, заменить ли оригинал сжатым результатом или сохранить его копию.
  - Для этого необходимо добавить селектор на главном экране:
    - Если селектор включён — сжатие происходит с заменой оригинального файла.
    - Если селектор выключен — создается новый файл с добавлением суффикса (например, _compressed или _1, _2 и т.д.).
  - Важно: логика обнаружения дубликатов не должна измениться (то есть, проверка на уже сжатый файл остается прежней).

### 1.2. Интеграция ИИ для оптимизации сжатия
- Разработать модуль, основанный на ИИ, для автоматического подбора оптимальных параметров сжатия:
  - Анализировать качество исходного изображения и выбирать наилучшие параметры (качество, разрешение).
  - На основе обратной связи от пользователя (например, оценка качества сжатого изображения) корректировать настройки в будущем.
- Обеспечить взаимодействие модуля ИИ с текущей логикой сжатия через API или встроенные обработчики событий.

## 2. Исправление ошибок

### 2.1. Устранение дублирования файлов
- Исправить проблему дублирования файлов, возникающую из-за конфликтующих методов обнаружения уже сжатых файлов:
  - Улучшить алгоритм проверки по имени и наличию суффикса, используя запросы по шаблону (LIKE) для надёжного обнаружения всех версий сжатых файлов.
  - Убедиться, что новая логика не нарушает существующую функциональность обнаружения дубликатов в других частях приложения.

## 3. Дополнительные задачи

- Провести рефакторинг логики сжатия для повышения читаемости и поддержки кода.
- Улучшить обработку ошибок и логирование, чтобы обеспечить более информативные сообщения и поддержку отладки.
- Обеспечить информирование пользователя о результате сжатия через UI уведомления или сообщения.
- Провести тестирование новой функциональности с участием модуля ИИ для проверки выбора параметров сжатия и корректного сохранения/замены файлов.